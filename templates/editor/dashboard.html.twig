{% extends 'base.html.twig' %}

{% block title %}
	Panel de Editor
{% endblock %}

{% block stylesheets %}
	<link rel="stylesheet" href="{{ asset('css/editor/dashboard.css') }}">
{% endblock %}

{% block body %}
	<main class="editor-wrapper">
		<h1 class="editor-titulo">ğŸ® Panel del Editor</h1>

		{% for message in app.flashes('success') %}
			<div class="alerta-exito">{{ message }}</div>
		{% endfor %}

		<div class="acciones">
			<a href="{{ path('noticia_nueva') }}" class="btn btn-crear">â• Crear nueva noticia</a>
			<a href="{{ path('categoria_listar') }}" class="btn btn-categorias">ğŸ“‚ Gestionar categorÃ­as</a>
		</div>

		<section class="listado">
			<h2>Listado de noticias</h2>
			<table class="tabla-noticias">
				<thead>
					<tr>
						<th>TÃ­tulo</th>
						<th>CategorÃ­a</th>
						<th>Estado</th>
						<th>Fecha</th>
						<th>Acciones</th>
					</tr>
				</thead>
				<tbody>
					{% for noticia in noticias %}
						<tr>
							<td>{{ noticia.titulo }}</td>
							<td>
								{% if noticia.categoria %}
									{{ noticia.categoria.nombre }}
								{% else %}
									Sin categorÃ­a
								{% endif %}
							</td>
							<td>{{ noticia.estado }}</td>
							<td>{{ noticia.fechaPublicacion|date('d/m/Y') }}</td>
							<td class="acciones-tabla">
								<a href="{{ path('noticia_editar', {'id': noticia.id}) }}" class="btn-accion editar">âœï¸ Editar</a>
								<form method="post" action="{{ path('noticia_eliminar', {'id': noticia.id}) }}" onsubmit="return confirm('Â¿Deseas eliminar permanentemente esta noticia?');">
									<button type="submit" class="btn-accion eliminar">ğŸ—‘ï¸ Eliminar</button>
								</form>
							</td>
						</tr>
					{% else %}
						<tr>
							<td colspan="5">No hay noticias creadas aÃºn.</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		</section>

		<section class="estadisticas">
			<h2>EstadÃ­sticas rÃ¡pidas</h2>
			<ul>
				<li>Total de noticias:
					{{ noticias|length }}</li>
				<li>CategorÃ­as disponibles:
					{{ categorias|length }}</li>
			</ul>
		</section>
	</main>
{% endblock %}
