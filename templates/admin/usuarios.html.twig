{% extends 'base.html.twig' %}

{% block title %}Gesti√≥n de Usuarios
{% endblock %}

{% block stylesheets %}
	<link rel="stylesheet" href="{{ asset('css/admin/eusuarios.css') }}">
{% endblock %}

{% block body %}
	<main class="eusuarios-wrapper">
		<h1 class="eusuarios-titulo">üë• Gesti√≥n de Usuarios</h1>

		{# Mensajes flash #}
		{% for message in app.flashes('success') %}
			<div class="alerta-exito">{{ message }}</div>
		{% endfor %}
		{% for message in app.flashes('error') %}
			<div class="alerta-error">{{ message }}</div>
		{% endfor %}

		<section class="listado-usuarios">
			<table class="tabla-usuarios">
				<thead>
					<tr>
						<th>ID</th>
						<th>Correo</th>
						<th>Nombre de usuario</th>
						<th>Rol</th>
						<th>Estado</th>
						<th>Acciones</th>
					</tr>
				</thead>
				<tbody>
					{% for usuario in usuarios %}
						<tr>
							<td>{{ usuario.id }}</td>
							<td>{{ usuario.correo }}</td>
							<td>{{ usuario.nombreUsuario }}</td>
							<td>
								{% if usuario.rol == 'ROLE_ADMIN'%}
									<span class="rol admin">ADMINISTRADOR</span>
								{% elseif usuario.rol == 'ROLE_EDITOR' %}
									<span class="rol editor">EDITOR</span>
								{% else %}
									<span class="rol user">USUARIO</span>
								{% endif %}
							</td>
							<td>
								{% if usuario.estado %}
									<span class="estado activo">Activo</span>
								{% else %}
									<span class="estado suspendido">Suspendido</span>
								{% endif %}
							</td>
							<td class="acciones-tabla">
								<a href="{{ path('usuario_editar', {id: usuario.id}) }}" class="btn-accion editar">‚úèÔ∏è Editar</a>
								<form method="post" action="{{ path('usuario_eliminar', {id: usuario.id}) }}" onsubmit="return confirm('¬øSeguro que deseas eliminar este usuario?');">
									<button class="btn-accion eliminar">üóëÔ∏è Eliminar</button>
								</form>
							</td>
						</tr>
					{% else %}
						<tr>
							<td colspan="6">No hay usuarios registrados.</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		</section>
	</main>
{% endblock %}
