@startuml Diagrama de Secuencia - Gestionar Usuarios
actor Administrador
participant "UsuarioController" as UsuarioController
participant "AbstractController" as AbstractController
participant "EntityManagerInterface" as EM
participant "UsuarioRepository" as UsuarioRepo

Administrador -> UsuarioController : GET /admin/usuarios\nlistar(EM)
activate UsuarioController
UsuarioController -> AbstractController : denyAccessUnlessGranted('ROLE_ADMIN')
activate AbstractController
AbstractController --> UsuarioController : allowed|exception
deactivate AbstractController
UsuarioController -> EM : getRepository(Usuario::class)->findAll()
activate EM
EM --> UsuarioController : usuarios[]
deactivate EM
UsuarioController --> Administrador : render(admin/usuarios.html.twig)
deactivate UsuarioController
@enduml